"""Response object for authentication queries"""
type AuthResult {
  success: Boolean!
  user: UserObject!
}

scalar Date

"""FriendRequest object type"""
type FriendRequestObject {
  createdAt: Date!
  fromUser: UserObject!
  fromUserId: ID!
  id: ID!
  pk: Int!
  toUser: UserObject!
  toUserId: ID!
  updatedAt: Date!
}

"""Friendship object type"""
type FriendshipObject {
  createdAt: Date!
  firstUser: UserObject!
  firstUserId: ID!
  id: ID!
  pk: Int!
  secondUser: UserObject!
  secondUserId: ID!
  updatedAt: Date!
}

"""Message object type"""
type MessageObject {
  author: UserObject!
  authorId: ID!
  body: String!
  createdAt: Date!
  id: ID!
  pk: Int!
  thread: MessageThreadObject!
  threadId: ID!
  updatedAt: Date!
}

"""MessageThread object type"""
type MessageThreadObject {
  createdAt: Date!
  id: ID!
  messages: [MessageObject!]!
  participants: [UserObject!]!
  pk: Int!
  updatedAt: Date!
}

type Mutation {
  """Accept a pending friend request"""
  acceptRequest(requestId: String!): FriendshipObject!

  """Returns an existing or newly created MessageThread"""
  createMessageThread(userId: String!): MessageThreadObject!

  """Decline all pending friend requests"""
  declineAllRequests: Boolean!

  """Decline a pending friend request"""
  declineRequest(requestId: String!): FriendRequestObject!

  """Send a friend request to a user"""
  sendRequest(userId: String!): FriendRequestObject!

  """Sign in user"""
  signin(input: SigninInput!): AuthResult!

  """Sign out user"""
  signout: SuccessResultObject!

  """Sign up new user"""
  signup(input: SignupInput!): AuthResult!

  """Unfriend a user"""
  unfriend(userId: String!): FriendshipObject!

  """Unsend a sent friend request"""
  unsendRequest(requestId: String!): Boolean!
}

type Query {
  """Returns currently active MessageThreads for user"""
  activeMessageThreads: [MessageThreadObject!]!

  """returns all users"""
  allUsers: [UserObject!]!

  """Authorize user session"""
  authorize: AuthResult!

  """Gets random discoverable users for a client"""
  discoverUsers(cursor: Int, limit: Int! = 12, query: String!): [UserObject!]!

  """Get friends list of current user"""
  friendsList: [FriendshipObject!]!
  hello(name: String): String!

  """Check if user is a friend"""
  isFriend(userId: String!): Boolean!

  """Returns a MessageThread by id"""
  messageThread(threadId: String!): MessageThreadObject!

  """Get pending requests of current user"""
  pendingRequests: [FriendRequestObject!]!

  """Returns list of friends matching search term"""
  searchFriends(searchTerm: String!): [UserObject!]!

  """Get sent requests of current user"""
  sentRequests: [FriendRequestObject!]!

  """returns info for a user"""
  user(userId: String!): UserObject!
}

"""Information about user session"""
type SessionObject {
  createdAt: Date!
  id: ID!
  pk: Int!
  updatedAt: Date!
  user: UserObject!
  userId: ID!
}

input SigninInput {
  email: String!
  password: String!
}

input SignupInput {
  bio: String
  department: String
  email: String!
  password: String!
  semester: Int
  university: String
  username: String!
}

"""Response object for succesful queries"""
type SuccessResultObject {
  success: Boolean!
}

"""User object type"""
type UserObject {
  avatarUrl: String
  bio: String
  createdAt: Date!
  department: String
  displayName: String!
  email: String!
  friends: [FriendshipObject!]!
  id: ID!
  messageThreads: [MessageThreadObject!]!
  messages: [MessageObject!]!
  pendingRequests: [FriendRequestObject!]!
  pk: Int!
  role: String!
  semester: Int
  sentRequests: [FriendRequestObject!]!
  sessions: [SessionObject!]!
  university: String
  updatedAt: Date!
  username: String!
}
